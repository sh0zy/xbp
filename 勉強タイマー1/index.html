<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Focus Wave Timer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#07121f" />

  <!-- iOS PWA 対応（ホーム画面追加用） -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Focus Wave" />

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <!-- 波 SVG 背景 -->
    <div class="wave-bg">
      <svg viewBox="0 0 1440 320" preserveAspectRatio="none">
        <path id="wavePath"
          fill="url(#waveGradient)"
          fill-opacity="0.8"
          d="M0,160L60,176C120,192,240,224,360,229.3C480,235,600,213,720,186.7C840,160,960,128,1080,106.7C1200,85,1320,75,1380,69.3L1440,64L1440,320L0,320Z">
        </path>
        <defs>
          <linearGradient id="waveGradient" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#4fc3f7" />
            <stop offset="50%" stop-color="#29b6f6" />
            <stop offset="100%" stop-color="#0288d1" />
          </linearGradient>
        </defs>
      </svg>
    </div>

    <!-- メインカード（ガラスモーフィズム） -->
    <main class="glass-card">
      <header class="header">
        <div>
          <h1>Focus Wave Timer</h1>
          <p class="subtitle">波と一緒に集中するタイマー</p>
        </div>
        <div class="title-badge" id="titleBadge">称号：初心の波</div>
      </header>

      <!-- タイマー設定と表示 -->
      <section class="timer-section">
        <div class="timer-display" id="timerDisplay">25:00</div>
        <div class="timer-controls">
          <label class="time-label">
            時間（分）:
            <input type="number" id="minutesInput" min="1" max="180" value="25" />
          </label>
          <div class="buttons">
            <button id="startBtn" class="primary">スタート</button>
            <button id="pauseBtn" class="secondary" disabled>一時停止</button>
            <button id="resetBtn" class="secondary" disabled>リセット</button>
          </div>
        </div>
      </section>

      <!-- 集中時間サマリ -->
      <section class="summary-section">
        <div class="summary-item">
          <span class="label">今日の集中時間</span>
          <span class="value" id="todayTotal">0 分</span>
        </div>
        <div class="summary-item">
          <span class="label">今週の集中時間</span>
          <span class="value" id="weekTotal">0 分</span>
        </div>
        <div class="summary-item">
          <span class="label">今月の集中時間</span>
          <span class="value" id="monthTotal">0 分</span>
        </div>
        <div class="summary-item">
          <span class="label">連続成功日数</span>
          <span class="value" id="streakDays">0 日</span>
        </div>
      </section>

      <!-- 週ごとのグラフ（SVGアニメ） -->
      <section class="chart-section">
        <h2>今週の集中時間</h2>
        <svg id="weekChart" viewBox="0 0 200 100" class="week-chart" preserveAspectRatio="none">
          <!-- 軸 -->
          <line x1="5" y1="5" x2="5" y2="90" class="axis" />
          <line x1="5" y1="90" x2="195" y2="90" class="axis" />

          <!-- 棒グラフ用グループ（JSで生成） -->
        </svg>
        <div class="week-labels">
          <span>月</span><span>火</span><span>水</span><span>木</span><span>金</span><span>土</span><span>日</span>
        </div>
      </section>

      <!-- フッター -->
      <footer class="footer">
        <span>オフライン対応・PWA / 集中タイマー</span>
        <span id="installHint" class="install-hint">ブラウザのメニューから「ホーム画面に追加」でアプリ化できます</span>
      </footer>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>

<script>
  // スマホの100vh問題を解決
  function updateVh() {
    document.documentElement.style.setProperty('--vh', `${window.innerHeight * 0.01}px`);
  }
  updateVh();
  window.addEventListener('resize', updateVh);
</script>